"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[595],{7595:function(t,a,e){e.r(a),e.d(a,{default:function(){return m}});var o=function(){var t=this,a=t._self._c;return a("div",{staticClass:"Journal-box"},[a("div",{staticClass:"Journal"},[a("div",{staticClass:"Journal-form"},[a("h1",[t._v(t._s(t.$t("Journal.formdata.title")))]),t._l(t.$t("Journal.formdata.describe"),(function(e,o){return a("p",{key:o},[t._v(" "+t._s(e)+" ")])}))],2),a("div",{staticClass:"Journal-content"},[a("el-form",{ref:"elForm",attrs:{model:t.formData,size:"medium","label-width":"100px","label-position":"top"}},[a("el-form-item",{attrs:{label:t.$t("Journal.formdata.identityLable"),prop:"identity"}},[a("el-radio",{attrs:{label:"1"},model:{value:t.formData.identity,callback:function(a){t.$set(t.formData,"identity",a)},expression:"formData.identity"}},[t._v(t._s(t.$t("Journal.formdata.label1")))]),a("el-radio",{attrs:{label:"2"},model:{value:t.formData.identity,callback:function(a){t.$set(t.formData,"identity",a)},expression:"formData.identity"}},[t._v(t._s(t.$t("Journal.formdata.label2")))])],1),a("el-form-item",{attrs:{label:t.$t("Journal.formdata.contentLable"),prop:"content"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.formData.content,callback:function(a){t.$set(t.formData,"content",a)},expression:"formData.content"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:t.$t("Journal.formdata.nameLable"),prop:"name"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"",clearable:""},model:{value:t.formData.name,callback:function(a){t.$set(t.formData,"name",a)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:t.$t("Journal.formdata.mailboxLable"),prop:"mailbox"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"",clearable:""},model:{value:t.formData.mailbox,callback:function(a){t.$set(t.formData,"mailbox",a)},expression:"formData.mailbox"}})],1)],1),a("div",{staticClass:"button"},[a("el-button",{attrs:{type:"danger",round:""},on:{click:t.submit}},[t._v(" "+t._s(t.$t("Journal.formdata.buttonText"))+" ")])],1)],1)]),a("div",{staticClass:"Journal-list"},[a("p",{staticClass:"Journal-text"},[t._v(t._s(t.$t("Journal.text")))]),a("div",{staticClass:"Journal-view"},t._l(t.JournalList,(function(e,o){return a("div",{key:o,staticClass:"Journal-item",on:{click:function(a){return t.onDateils(e)}}},[a("img",{attrs:{src:"./static/image/"+e.img,alt:""}}),a("div",[a("p",{style:0==e.status?"background: rgba(0,0,0,0.5);":""},[t._v(" "+t._s(e.count)+" ")]),a("p",[t._v(t._s(e.title))]),a("p",[t._v(t._s(e.describe))]),a("p",[t._v(t._s(e.more))])])])})),0)])])},s=[],l=(e(7658),e(6154)),i=e(4720),n={data:()=>({formData:{identity:"",name:"",mailbox:"",content:""},radio:"",JournalList:[],list:[]}),computed:{options(){return this.$t("Journal.formdata.options")},formMassge(){return this.$t("Journal.formdata.formMassge")}},mounted(){console.log(this.options,"===="),this.intData()},methods:{intData(t){const a=localStorage.getItem("lang");switch(a){case"en":l.Z.get("/static/lang/en.json",{}).then((({data:t})=>{this.list=t.JournalList,this.JournalList=this.list.filter((t=>1==t.status))}));break;case"Czh":l.Z.get("/static/lang/Czh.json",{}).then((({data:t})=>{this.list=t.JournalList,this.JournalList=this.list.filter((t=>1==t.status))}));break;default:l.Z.get("/static/lang/zh.json",{}).then((({data:t})=>{this.list=t.JournalList,this.JournalList=this.list.filter((t=>1==t.status))}));break}},onDateils(t){window.scrollTo({top:0}),1==t.status?this.$router.push({path:"/Journal",query:{id:t.id}}):this.$router.push("/journalform")},submit(){const{identity:t,name:a,mailbox:e,content:o}=this.formData;if(t&&a&&e&&o){console.log(this.fileList);let s=new FormData;s.append("身份",1==t?"内容提供者":"读者"),s.append("内容",o),s.append("名称",a),s.append("电子邮箱",e);const n=i.Loading.service({lock:!0,text:"loading...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)"});(0,l.Z)({method:"post",url:periodicalMailUrl,async:!0,data:s,headers:{"Content-Type":"text/html; charset=utf-8"}}).then((t=>{n.close(),console.log(t,"===="),this.$router.push("/success")})).catch((t=>{n.close(),that.$message({showClose:!0,message:"error",type:"warning",offset:80})}))}else console.log(this.form),this.$message({showClose:!0,message:this.formMassge,type:"warning",offset:80})}}},r=n,u=e(1001),c=(0,u.Z)(r,o,s,!1,null,"954de626",null),m=c.exports}}]);
//# sourceMappingURL=595.75e5c34d.js.map